{"id":"72543264-4cc5-4e75-a021-6308218cb6d1","revision":0,"last_node_id":46,"last_link_id":62,"nodes":[{"id":20,"type":"StringPreview","pos":[-481.4031066894531,312.9426574707031],"size":[220,88],"flags":{},"order":5,"mode":0,"inputs":[{"name":"input_string","type":"STRING","link":53}],"outputs":[{"localized_name":"output_string","name":"output_string","type":"STRING","links":[39]}],"properties":{"cnr_id":"comfyui_stringessentials","ver":"90c3d6a46b90e1e15fa3bc076a68bd087ec2a189"},"widgets_values":["```json\n{\n  \"tags\": [\n    \"Interior\",\n    \"Hotel Room\",\n    \"Accommodation\",\n    \"Bedroom Area\",\n    \"Living Area\",\n    \"Dining Area\",\n    \"Open Plan Room\",\n    \"Bed\",\n    \"Double Bed\",\n    \"White Bedding\",\n    \"Elevated Platform Bed\",\n    \"Headboard\",\n    \"Slatted Wall Panel\",\n    \"Sofa\",\n    \"Light Colored Sofa\",\n    \"Bench Seating\",\n    \"Light Colored Bench\",\n    \"Dining Table\",\n    \"White Dining Table\",\n    \"Wooden Floor\",\n    \"Light Wood Floor\",\n    \"Light Beige Walls\",\n    \"Ceiling\",\n    \"Slanted Ceiling\",\n    \"Ceiling Spotlights\",\n    \"Recessed Lighting\",\n    \"LED Strip Light\",\n    \"Wall Light\",\n    \"Pendant Light\",\n    \"Ceiling Fan\",\n    \"Television\",\n    \"Flat Screen TV\",\n    \"Window Blinds\",\n    \"White Roller Blinds\",\n    \"Large Window\",\n    \"Floor-to-Ceiling Window\",\n    \"Panoramic Window\",\n    \"Sliding Glass Door\",\n    \"Exterior View\",\n    \"Outdoor Area\",\n    \"Green Grass\",\n    \"Lawn\",\n    \"Bushes\",\n    \"Small Trees\",\n    \"Evergreen Bushes\",\n    \"Evergreen Trees\",\n    \"Buildings\",\n    \"Modern Buildings\",\n    \"Grey Building\",\n    \"White Building\",\n    \"Hills in Distance\",\n    \"Mountains in Distance\",\n    \"Sky\",\n    \"Blue Sky\",\n    \"Clouds\",\n    \"White Clouds\",\n    \"Cumulus Clouds\",\n    \"Outdoor Umbrellas\",\n    \"Patio Umbrellas\",\n    \"Natural Light\",\n    \"Daylight\",\n    \"Bright Light\",\n    \"Artificial Light\",\n    \"Interior Lighting\",\n    \"Sunny Weather\",\n    \"Daytime\",\n    \"Interior Shot\",\n    \"Wide Angle Shot\"\n  ]\n}\n```"]},{"id":3,"type":"Image to B64 Node","pos":[-744.3583984375,951.2960205078125],"size":[241.79998779296875,26],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":31}],"outputs":[{"localized_name":"base64_string","name":"base64_string","type":"STRING","links":[32]}],"properties":{"aux_id":"yanolja-comfyui-vertexai.git","ver":"140a806a7ced3762c965e69467ff1cee027bbba1","Node name for S&R":"Image to B64 Node"},"widgets_values":[]},{"id":23,"type":"StringToolsConcat","pos":[-35.68473815917969,215.75453186035156],"size":[214.20001220703125,46],"flags":{"collapsed":false},"order":6,"mode":0,"inputs":[{"localized_name":"separator","name":"separator","shape":7,"type":"STRING","widget":{"name":"separator"},"link":null},{"name":"text_0","type":"STRING","widget":{"name":"text_0"},"link":38},{"name":"text_1","type":"STRING","widget":{"name":"text_1"},"link":39},{"name":"text_2","type":"STRING","widget":{"name":"text_2"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[34,54]}],"properties":{"cnr_id":"comfyui-string-tools","ver":"d771a0736b876ab20fc1dca0ac931cb930f08092","Node name for S&R":"StringToolsConcat"},"widgets_values":[]},{"id":45,"type":"StringToolsConcat","pos":[207.5523681640625,1300.6304931640625],"size":[214.20001220703125,46],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"separator","name":"separator","shape":7,"type":"STRING","widget":{"name":"separator"},"link":null},{"name":"text_0","type":"STRING","widget":{"name":"text_0"},"link":58},{"name":"text_1","type":"STRING","widget":{"name":"text_1"},"link":59},{"name":"text_2","type":"STRING","widget":{"name":"text_2"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[60]}],"properties":{"cnr_id":"comfyui-string-tools","ver":"d771a0736b876ab20fc1dca0ac931cb930f08092","Node name for S&R":"StringToolsConcat"},"widgets_values":[]},{"id":2,"type":"VideoPreviewNode","pos":[587.6320190429688,127.20149230957031],"size":[251.46517944335938,1749.974609375],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"gcs_urls","name":"gcs_urls","type":"STRING","widget":{"name":"gcs_urls"},"link":41}],"outputs":[{"localized_name":"FILE_PATHs","name":"FILE_PATHs","type":"STRING","links":[]}],"properties":{"aux_id":"yanolja-comfyui-vertexai.git","ver":"140a806a7ced3762c965e69467ff1cee027bbba1","Node name for S&R":"VideoPreviewNode"},"widgets_values":["",{"hidden":false,"paused":false,"params":{}}]},{"id":38,"type":"StringPreview","pos":[1408.950439453125,1096.4078369140625],"size":[666.663818359375,574.2202758789062],"flags":{},"order":15,"mode":0,"inputs":[{"name":"input_string","type":"STRING","link":57}],"outputs":[{"localized_name":"output_string","name":"output_string","type":"STRING","links":[]}],"properties":{"cnr_id":"comfyui_stringessentials","ver":"90c3d6a46b90e1e15fa3bc076a68bd087ec2a189","aux_id":"bradsec/ComfyUI_StringEssentials"},"widgets_values":["```json\n[\n {\n  \"candidate\": 0,\n  \"rank\": 1,\n  \"reason\": \"The video accurately follows all prompt instructions, including the slow dolly shot forward, rotating ceiling fan, moving clouds, and subtle foliage movement. The movement is smooth and stable.\"\n },\n {\n  \"candidate\": 1,\n  \"rank\": 2,\n  \"reason\": \"The video follows all prompt instructions. The dolly shot, fan rotation, cloud movement, and foliage movement are present. It is slightly less smooth and stable than Candidate 0.\"\n },\n {\n  \"candidate\": 2,\n  \"rank\": 3,\n  \"reason\": \"The video follows all prompt instructions. The dolly shot, fan rotation, cloud movement, and foliage movement are present. It exhibits similar stability and smoothness to Candidate 1, slightly less than Candidate 0.\"\n },\n {\n  \"candidate\": 3,\n  \"rank\": 4,\n  \"reason\": \"The video follows all prompt instructions. The dolly shot, fan rotation, cloud movement, and foliage movement are present. It is comparable in quality and stability to Candidates 1 and 2, ranking slightly lower due to minor visual artifacts.\"\n }\n]\n```"]},{"id":25,"type":"StringPreview","pos":[90.56098175048828,495.82861328125],"size":[369.72344970703125,217.58580017089844],"flags":{},"order":9,"mode":0,"inputs":[{"name":"input_string","type":"STRING","link":56}],"outputs":[{"localized_name":"output_string","name":"output_string","type":"STRING","links":[33,59]}],"properties":{"cnr_id":"comfyui_stringessentials","ver":"90c3d6a46b90e1e15fa3bc076a68bd087ec2a189"},"widgets_values":["```json\n{\n  \"prompt\": \"A modern hotel room interior with a large panoramic window showcasing a view of a green lawn, bushes, modern buildings, and a blue sky with moving clouds. The ceiling fan is slowly rotating. Subtle movement in the outdoor foliage. A slow dolly shot forward.\",\n  \"negative_prompt\": \"\"\n}\n```"]},{"id":6,"type":"StringPreview","pos":[88.74442291259766,1075.2747802734375],"size":[316.99334716796875,154.890625],"flags":{},"order":12,"mode":0,"inputs":[{"name":"input_string","type":"STRING","link":21}],"outputs":[{"localized_name":"output_string","name":"output_string","type":"STRING","links":[]}],"properties":{"cnr_id":"comfyui_stringessentials","ver":"90c3d6a46b90e1e15fa3bc076a68bd087ec2a189","aux_id":"bradsec/ComfyUI_StringEssentials"},"widgets_values":["gs://yanolja-veo-outputs/7648153119727475060/sample_0.mp4,gs://yanolja-veo-outputs/7648153119727475060/sample_1.mp4,gs://yanolja-veo-outputs/7648153119727475060/sample_2.mp4,gs://yanolja-veo-outputs/7648153119727475060/sample_3.mp4"]},{"id":46,"type":"StringToolsText","pos":[-339.5138854980469,1434.4781494140625],"size":[400,200],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[58]}],"properties":{"cnr_id":"comfyui-string-tools","ver":"d771a0736b876ab20fc1dca0ac931cb930f08092","Node name for S&R":"StringToolsText"},"widgets_values":["You are operating in 'selection' mode. Compare the following 4 video candidates, all generated for the same target scene using the same prompt. Analyze them based on the provided context: the generation prompt, and an image representing the start frame of the video.\nScore the rank among the videos including the reason\n\n**Output Format**\n{\n \"candidate\": 0,\n \"rank\": 1\n \"reason\": \n}\n\nPrompt : \n"]},{"id":44,"type":"Gemini Flash 2.0","pos":[923.8878784179688,1103.657470703125],"size":[405.5999755859375,286],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":61},{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":60},{"localized_name":"video_urls","name":"video_urls","shape":7,"type":"STRING","widget":{"name":"video_urls"},"link":62},{"localized_name":"temperature","name":"temperature","shape":7,"type":"FLOAT","widget":{"name":"temperature"},"link":null},{"localized_name":"top_p","name":"top_p","shape":7,"type":"FLOAT","widget":{"name":"top_p"},"link":null},{"localized_name":"top_k","name":"top_k","shape":7,"type":"INT","widget":{"name":"top_k"},"link":null},{"localized_name":"max_output_tokens","name":"max_output_tokens","shape":7,"type":"INT","widget":{"name":"max_output_tokens"},"link":null},{"localized_name":"stop_sequences","name":"stop_sequences","shape":7,"type":"STRING","widget":{"name":"stop_sequences"},"link":null}],"outputs":[{"localized_name":"generated_text","name":"generated_text","type":"STRING","links":[57]}],"properties":{"aux_id":"yanolja-comfyui-vertexai.git","ver":"140a806a7ced3762c965e69467ff1cee027bbba1","Node name for S&R":"Gemini Flash 2.0"},"widgets_values":["gemini-2.5-flash-preview-04-17","","",0.5000000000000001,1,1,65473,""]},{"id":17,"type":"Veo 2 Video Generation","pos":[-395.9630126953125,939.7764892578125],"size":[405.5999755859375,382],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"image","name":"image","shape":7,"type":"*","link":32},{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":33},{"localized_name":"output_gcs_uri","name":"output_gcs_uri","type":"STRING","widget":{"name":"output_gcs_uri"},"link":null},{"localized_name":"number_of_videos","name":"number_of_videos","type":"INT","widget":{"name":"number_of_videos"},"link":null},{"localized_name":"duration_seconds","name":"duration_seconds","type":"INT","widget":{"name":"duration_seconds"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"person_generation","name":"person_generation","type":"COMBO","widget":{"name":"person_generation"},"link":null},{"localized_name":"enhance_prompt","name":"enhance_prompt","type":"BOOLEAN","widget":{"name":"enhance_prompt"},"link":null},{"localized_name":"negative_prompt","name":"negative_prompt","type":"STRING","widget":{"name":"negative_prompt"},"link":null},{"localized_name":"aspect_ratio","name":"aspect_ratio","type":"COMBO","widget":{"name":"aspect_ratio"},"link":null},{"localized_name":"polling_interval_seconds","name":"polling_interval_seconds","type":"INT","widget":{"name":"polling_interval_seconds"},"link":null}],"outputs":[{"localized_name":"GCS_URIs","name":"GCS_URIs","type":"STRING","links":[21,41,62]}],"properties":{"aux_id":"yanolja-comfyui-vertexai.git","ver":"140a806a7ced3762c965e69467ff1cee027bbba1","Node name for S&R":"Veo 2 Video Generation"},"widgets_values":["veo-2.0-generate-001","","gs://yanolja-veo-outputs",4,5,774667076968328,"randomize","allow_adult",false,"","9:16",15]},{"id":26,"type":"StringPreview","pos":[229.00442504882812,197.3197784423828],"size":[336.1418762207031,184.324462890625],"flags":{"collapsed":false},"order":7,"mode":0,"inputs":[{"name":"input_string","type":"STRING","link":34}],"outputs":[{"localized_name":"output_string","name":"output_string","type":"STRING","links":[]}],"properties":{"cnr_id":"comfyui_stringessentials","ver":"90c3d6a46b90e1e15fa3bc076a68bd087ec2a189"},"widgets_values":["You are an expert Veo Prompt Engineer AI assistant. Your sole function is to generate concise, highly effective text prompts suitable for the Google Veo video generation model (which generates 5-second clips), based on multi-modal context. You understand Veo's severe limitations and how to craft prompts to mitigate them.\n\n**Core Task:**\nGiven detailed **image tags and an **image file which serves as the *actual starting frame* for the current scene, generate the optimal positive text prompt (`prompt`) and an optional negative prompt (`negative_prompt`) to create the *current* 5-second video clip using Veo.\n\n**General Veo Prompting Principles (Internalize These):**\n*   **Be Descriptive and Clear**: Identify the core idea and refine with keywords and modifiers. Use descriptive language (adjectives, adverbs).\n*   **Provide Context**: Include necessary background information.\n*   **Reference Specific Styles**: Mention artistic, cinematic, or visual styles explicitly.\n*   **Video Terminology**: Incorporate specific video terms for better control (e.g., \"dolly shot,\" \"wide-angle lens,\" \"shallow focus,\" \"sci-fi,\" \"film noir,\" \"two shot,\" \"over-the-shoulder shot,\" \"eye level,\" \"high angle\").\n\n**Key Veo Considerations Specific to this Task (You MUST Internalize These):**\n*   **Prompt is Paramount:** The main positive text `prompt` is the primary instruction telling Veo *what transformation to apply* to the start frame image over the 5-second duration. Precision and clarity are crucial.\n*  **Depicting Action or change:** Considering the image and its elements, identify factors that can reflect a dynamic feel, and suggest what dynamic elements could be incorporated. It's crucial to clearly specify the intended transformations when selecting elements, and equally important not to distort the main foreground elements.\n* ** Consistency:** For objects related to core accommodation and facilities, distortion must be avoided, and consistency should be maintained\n*   **Negative Prompts (Separate Parameter):** Negative prompts specify what *not* to generate. These descriptions MUST *never* be included in the main positive `prompt` string (e.g., do not write \"a ocean with no trees\" in the main prompt). Instead, extract descriptive terms for unwanted elements from the description (e.g., from `Continuity Notes & Prompt Strategy`) and place them in the separate `negative_prompt` output field. Use descriptive terms (e.g., `negative_prompt: \"trees\"`) rather than instructive language (`\"no trees\"`).\n\n**Input Processing:**\n1.  **Analyze Start Frame Image:** Visually interpret the provided start frame image to understand the precise visual baseline.\n2.  **Prioritize Current Scene Data:** Focus intensely on the detailed text description provided for the *current* scene. Extract the core desired elements for the main `prompt`, aligning with Veo's preferred structure:\n    *   `Subject`: The main object, person, animal, or scenery.\n    *   `Context`: The background or setting.\n    *   `Action/Transformation`: What the subject is doing or how the scene changes from the start frame. **This is critical for generating video from the static image.**\n    *   `Style`: Visual or cinematic style (e.g., \"horror film,\" \"cartoon style,\" \"3D animated scene,\" \"film noir\").\n    *   `Camera Motion`: How the camera moves (e.g., \"aerial view,\" \"dolly shot,\" \"pan shot,\" \"tracking shot,\" \"zoom shot\").\n    *   `Composition`: Framing of the shot (e.g., \"wide shot,\" \"close-up,\" \"over-the-shoulder shot,\" \"extreme close-up\").\n    *   `Ambiance`: Color, lighting, mood (e.g., \"blue tones,\" \"night,\" \"warm tones,\" \"natural light,\" \"sunrise,\" \"sad mood\").\n4.  **Synthesize Transformation Prompt (`prompt` field):** Combine the analysis of the start frame image with the positive instructions from the current scene text. Your goal is to craft a `prompt` describing the *action or change* needed to generate video from the start frame image of the current 5s clip. Use descriptive language and specific video terminology. Ensure this prompt *only* contains positive descriptions of what *should* be generated.\n5.  **Prepare Negative Prompt (`negative_prompt` field):** Compile the descriptive keywords identified in step 3 into a single string for the `negative_prompt` field. If no negative constraints were identified, this field will be an empty string.\n\n**Output Requirements:**\n*   Your output **MUST** be a single JSON object.\n*   This JSON object **MUST** contain two string fields: `prompt` and `negative_prompt`.\n*   The `prompt` field holds the final, optimized positive text prompt for the current scene, generated according to all instructions above. It must *never* contain negative instructions (like \"no\", \"without\", \"avoid\") or descriptions of unwanted elements.\n*   The `negative_prompt` field holds descriptive keywords for elements to avoid, derived from the context. Use descriptive terms (e.g., \"buildings, cars\") not instructions (\"no buildings\"). If no negative prompting is required by the input context, output an empty string (`\"\"`) for this field.\n*   Output *only* the text, with no surrounding text, explanations, or markdown formatting.\n\n**Remember that Depicting Action and Consistency is the most important in the key considerations. Therefore, prioritize associating actions with the objects in the image\n\n**Tags:**\n```json\n{\n  \"tags\": [\n    \"Interior\",\n    \"Hotel Room\",\n    \"Accommodation\",\n    \"Bedroom Area\",\n    \"Living Area\",\n    \"Dining Area\",\n    \"Open Plan Room\",\n    \"Bed\",\n    \"Double Bed\",\n    \"White Bedding\",\n    \"Elevated Platform Bed\",\n    \"Headboard\",\n    \"Slatted Wall Panel\",\n    \"Sofa\",\n    \"Light Colored Sofa\",\n    \"Bench Seating\",\n    \"Light Colored Bench\",\n    \"Dining Table\",\n    \"White Dining Table\",\n    \"Wooden Floor\",\n    \"Light Wood Floor\",\n    \"Light Beige Walls\",\n    \"Ceiling\",\n    \"Slanted Ceiling\",\n    \"Ceiling Spotlights\",\n    \"Recessed Lighting\",\n    \"LED Strip Light\",\n    \"Wall Light\",\n    \"Pendant Light\",\n    \"Ceiling Fan\",\n    \"Television\",\n    \"Flat Screen TV\",\n    \"Window Blinds\",\n    \"White Roller Blinds\",\n    \"Large Window\",\n    \"Floor-to-Ceiling Window\",\n    \"Panoramic Window\",\n    \"Sliding Glass Door\",\n    \"Exterior View\",\n    \"Outdoor Area\",\n    \"Green Grass\",\n    \"Lawn\",\n    \"Bushes\",\n    \"Small Trees\",\n    \"Evergreen Bushes\",\n    \"Evergreen Trees\",\n    \"Buildings\",\n    \"Modern Buildings\",\n    \"Grey Building\",\n    \"White Building\",\n    \"Hills in Distance\",\n    \"Mountains in Distance\",\n    \"Sky\",\n    \"Blue Sky\",\n    \"Clouds\",\n    \"White Clouds\",\n    \"Cumulus Clouds\",\n    \"Outdoor Umbrellas\",\n    \"Patio Umbrellas\",\n    \"Natural Light\",\n    \"Daylight\",\n    \"Bright Light\",\n    \"Artificial Light\",\n    \"Interior Lighting\",\n    \"Sunny Weather\",\n    \"Daytime\",\n    \"Interior Shot\",\n    \"Wide Angle Shot\"\n  ]\n}\n```"]},{"id":42,"type":"Gemini Flash 2.0","pos":[-472.5518493652344,510.6242980957031],"size":[405.5999755859375,286],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":55},{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":54},{"localized_name":"video_urls","name":"video_urls","shape":7,"type":"STRING","widget":{"name":"video_urls"},"link":null},{"localized_name":"temperature","name":"temperature","shape":7,"type":"FLOAT","widget":{"name":"temperature"},"link":null},{"localized_name":"top_p","name":"top_p","shape":7,"type":"FLOAT","widget":{"name":"top_p"},"link":null},{"localized_name":"top_k","name":"top_k","shape":7,"type":"INT","widget":{"name":"top_k"},"link":null},{"localized_name":"max_output_tokens","name":"max_output_tokens","shape":7,"type":"INT","widget":{"name":"max_output_tokens"},"link":null},{"localized_name":"stop_sequences","name":"stop_sequences","shape":7,"type":"STRING","widget":{"name":"stop_sequences"},"link":null}],"outputs":[{"localized_name":"generated_text","name":"generated_text","type":"STRING","links":[56]}],"properties":{"aux_id":"yanolja-comfyui-vertexai.git","ver":"140a806a7ced3762c965e69467ff1cee027bbba1","Node name for S&R":"Gemini Flash 2.0"},"widgets_values":["gemini-2.5-flash-preview-04-17","","",0.5000000000000001,1,1,8193,""]},{"id":41,"type":"Gemini Flash 2.0","pos":[-997.7960815429688,181.4446258544922],"size":[405.5999755859375,286],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":52},{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null},{"localized_name":"video_urls","name":"video_urls","shape":7,"type":"STRING","widget":{"name":"video_urls"},"link":null},{"localized_name":"temperature","name":"temperature","shape":7,"type":"FLOAT","widget":{"name":"temperature"},"link":null},{"localized_name":"top_p","name":"top_p","shape":7,"type":"FLOAT","widget":{"name":"top_p"},"link":null},{"localized_name":"top_k","name":"top_k","shape":7,"type":"INT","widget":{"name":"top_k"},"link":null},{"localized_name":"max_output_tokens","name":"max_output_tokens","shape":7,"type":"INT","widget":{"name":"max_output_tokens"},"link":null},{"localized_name":"stop_sequences","name":"stop_sequences","shape":7,"type":"STRING","widget":{"name":"stop_sequences"},"link":null}],"outputs":[{"localized_name":"generated_text","name":"generated_text","type":"STRING","links":[53]}],"properties":{"aux_id":"yanolja-comfyui-vertexai.git","ver":"140a806a7ced3762c965e69467ff1cee027bbba1","Node name for S&R":"Gemini Flash 2.0"},"widgets_values":["gemini-2.5-flash-preview-04-17","You are an AI Image tagger, providing tags to the user input image.\nGenerate labels to the user provided image.\nEnrich the tag as much as possible in the minute detail level.\n\n**Core Task:**\nAnalyze images of hotels and accommodation products to generate tags. It is necessary to differentiate between the core accommodation facilities and related objects within the image, and other scenery\n\n**Instructions:**\n1. **Comprehensive Tags:** Analyze the image and generate a list of comprehensive tags that accurately describe the visual content. Include tags for the following:\n * **Visual Elements: **\n  * Lighting: Source (natural, artificial), direction, color, and intensity. Creates atmosphere and drama (e.g., backlighting, rim lighting, shadows).\n  * Camera Angle (e.g., Full shot, Full body, Medium shot, upper body, Close up, Face focus, side view, front view, 45-degree side view)\n  * **Scene Elements:**\n   * Key objects and structures (e.g., trees, buildings, vehicles)\n   * Terrain features (e.g., mountains, rivers, cliffs)\n   * Weather and atmospheric conditions (e.g., sunny, rainy, foggy)\n   * Time of day (e.g., dawn, midday, night)\n2. **Specificity:** Be as specific as possible with your tags. Instead of just \"tree,\" use \"pine tree\" or \"dead tree.\"\n3. **No Interpretations:** Describe what is objectively present in the image. Do not include subjective interpretations or opinions about qethe image's artistic style or meaning.\n\n**Output Requirements:**\n*  Your output **MUST** be a single JSON object.\n*  This JSON object **MUST** contain list of comprehensive tags with itâ€™s field name\n","",0.9,1,1,2048,""]},{"id":18,"type":"LoadImage","pos":[-1526.9591064453125,566.1558227539062],"size":[315,314],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[31,52,55,61]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"LoadImage"},"widgets_values":["room.jpg","image"]},{"id":27,"type":"StringToolsText","pos":[-499.02459716796875,27.563501358032227],"size":[400,200],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[38]}],"properties":{"cnr_id":"comfyui-string-tools","ver":"d771a0736b876ab20fc1dca0ac931cb930f08092","Node name for S&R":"StringToolsText"},"widgets_values":["You are an expert Veo Prompt Engineer AI assistant. Your sole function is to generate concise, highly effective text prompts suitable for the Google Veo video generation model (which generates 5-second clips), based on multi-modal context. You understand Veo's severe limitations and how to craft prompts to mitigate them.\n\n**Core Task:**\nGiven detailed **image tags and an **image file which serves as the *actual starting frame* for the current scene, generate the optimal positive text prompt (`prompt`) and an optional negative prompt (`negative_prompt`) to create the *current* 5-second video clip using Veo.\n\n**General Veo Prompting Principles (Internalize These):**\n*   **Be Descriptive and Clear**: Identify the core idea and refine with keywords and modifiers. Use descriptive language (adjectives, adverbs).\n*   **Provide Context**: Include necessary background information.\n*   **Reference Specific Styles**: Mention artistic, cinematic, or visual styles explicitly.\n*   **Video Terminology**: Incorporate specific video terms for better control (e.g., \"dolly shot,\" \"wide-angle lens,\" \"shallow focus,\" \"sci-fi,\" \"film noir,\" \"two shot,\" \"over-the-shoulder shot,\" \"eye level,\" \"high angle\").\n\n**Key Veo Considerations Specific to this Task (You MUST Internalize These):**\n*   **Prompt is Paramount:** The main positive text `prompt` is the primary instruction telling Veo *what transformation to apply* to the start frame image over the 5-second duration. Precision and clarity are crucial.\n*  **Depicting Action or change:** Considering the image and its elements, identify factors that can reflect a gentle flow or subtle movement, and suggest what gradual elements could be incorporated. It's crucial to clearly specify the intended transformations when selecting elements, and equally important not to distort the main foreground elements.\n* ** Consistency:** For objects related to core accommodation and facilities, distortion must be avoided, and consistency should be maintained\n*   **Negative Prompts (Separate Parameter):** Negative prompts specify what *not* to generate. These descriptions MUST *never* be included in the main positive `prompt` string (e.g., do not write \"a ocean with no trees\" in the main prompt). Instead, extract descriptive terms for unwanted elements from the description (e.g., from `Continuity Notes & Prompt Strategy`) and place them in the separate `negative_prompt` output field. Use descriptive terms (e.g., `negative_prompt: \"trees\"`) rather than instructive language (`\"no trees\"`).\n\n**Input Processing:**\n1.  **Analyze Start Frame Image:** Visually interpret the provided start frame image to understand the precise visual baseline.\n2.  **Prioritize Current Scene Data:** Focus intensely on the detailed text description provided for the *current* scene. Extract the core desired elements for the main `prompt`, aligning with Veo's preferred structure:\n    *   `Subject`: The main object, person, animal, or scenery.\n    *   `Context`: The background or setting.\n    *   `Action/Transformation`: What the subject is doing or how the scene changes from the start frame. **This is critical for generating video from the static image.**\n    *   `Style`: Visual or cinematic style (e.g., \"horror film,\" \"cartoon style,\" \"3D animated scene,\" \"film noir\").\n    *   `Camera Motion`: How the camera moves (e.g., \"aerial view,\" \"dolly shot,\" \"pan shot,\" \"tracking shot,\" \"zoom shot\").\n    *   `Composition`: Framing of the shot (e.g., \"wide shot,\" \"close-up,\" \"over-the-shoulder shot,\" \"extreme close-up\").\n    *   `Ambiance`: Color, lighting, mood (e.g., \"blue tones,\" \"night,\" \"warm tones,\" \"natural light,\" \"sunrise,\" \"sad mood\").\n4.  **Synthesize Transformation Prompt (`prompt` field):** Combine the analysis of the start frame image with the positive instructions from the current scene text. Your goal is to craft a `prompt` describing the *action or change* needed to generate video from the start frame image of the current 5s clip. Use descriptive language and specific video terminology. Ensure this prompt *only* contains positive descriptions of what *should* be generated.\n5.  **Prepare Negative Prompt (`negative_prompt` field):** Compile the descriptive keywords identified in step 3 into a single string for the `negative_prompt` field. If no negative constraints were identified, this field will be an empty string.\n\n**Output Requirements:**\n*   Your output **MUST** be a single JSON object.\n*   This JSON object **MUST** contain two string fields: `prompt` and `negative_prompt`.\n*   The `prompt` field holds the final, optimized positive text prompt for the current scene, generated according to all instructions above. It must *never* contain negative instructions (like \"no\", \"without\", \"avoid\") or descriptions of unwanted elements.\n*   The `negative_prompt` field holds descriptive keywords for elements to avoid, derived from the context. Use descriptive terms (e.g., \"buildings, cars\") not instructions (\"no buildings\"). If no negative prompting is required by the input context, output an empty string (`\"\"`) for this field.\n*   Output *only* the text, with no surrounding text, explanations, or markdown formatting.\n\n**Remember that Depicting Action and Consistency is the most important in the key considerations. Therefore, prioritize associating actions with the objects in the image\n\n**Tags:**\n"]}],"links":[[21,17,0,6,0,"STRING"],[31,18,0,3,0,"IMAGE"],[32,3,0,17,0,"*"],[33,25,0,17,2,"STRING"],[34,23,0,26,0,"STRING"],[38,27,0,23,1,"STRING"],[39,20,0,23,2,"STRING"],[41,17,0,2,0,"STRING"],[52,18,0,41,0,"IMAGE"],[53,41,0,20,0,"STRING"],[54,23,0,42,2,"STRING"],[55,18,0,42,0,"IMAGE"],[56,42,0,25,0,"STRING"],[57,44,0,38,0,"STRING"],[58,46,0,45,1,"STRING"],[59,25,0,45,2,"STRING"],[60,45,0,44,2,"STRING"],[61,18,0,44,0,"IMAGE"],[62,17,0,44,3,"STRING"]],"groups":[],"config":{},"extra":{"ds":{"scale":2.3939204936916436,"offset":[587.7859998595768,53.46280848525345]},"frontendVersion":"1.16.9","VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}